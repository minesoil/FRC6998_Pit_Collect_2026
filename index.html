<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FRC 6998 – REBUILT 2026 Pit Collect (Offline)</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{--bg1:#0F0F12;--bg2:#1A1A1F;--txt:#F2F2F2;--gold:#D4AF37;}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Lexend',sans-serif;}
body{background:var(--bg1);color:var(--txt);}
header{text-align:center;padding:22px;border-bottom:3px solid var(--gold);}
.container{max-width:900px;margin:20px auto;padding:14px;}
.card{background:linear-gradient(145deg,var(--bg1),var(--bg2));border-radius:18px;padding:18px;margin-bottom:16px;}
.card h2{border-left:6px solid var(--gold);padding-left:12px;margin-bottom:10px;}
label{display:block;margin-top:10px;font-weight:600;}
input,textarea{width:100%;padding:9px;margin-top:6px;background:#121218;color:var(--txt);border-radius:12px;border:1px solid rgba(255,255,255,.15);}
.checkbox-inline{display:flex;flex-wrap:wrap;gap:12px;margin-top:6px;}
.checkbox-inline label{display:flex;align-items:center;gap:6px;font-weight:normal;}
.main-btn{flex:1;padding:12px;font-weight:bold;border-radius:14px;background:linear-gradient(135deg,#D4AF37,#FFD966);border:none;cursor:pointer;}
.nav-buttons{display:flex;gap:10px;margin-top:12px;}
.page{display:none;}
.page.active{display:block;}
#qrcode{width:128px;height:128px;margin:0 auto;background:white;border-radius:10px;}
#savedEntries{margin-top:12px;max-height:150px;overflow-y:auto;border:1px solid var(--gold);padding:6px;border-radius:8px;background:#121218;}
</style>
</head>
<body>

<header>
  <h1>FRC 6998 – REBUILT 2026</h1>
  <p>Pit Scouting (Offline)</p>
</header>

<div class="container">

<!-- PAGE 1 -->
<div class="page active">
  <div class="card">
    <h2>Scouter Info</h2>
    <label>Scouter Name</label><input id="scouter">
    <label>Team Number</label><input id="team" type="number">
    <p id="teamInfo"></p>
  </div>
  <div class="nav-buttons">
    <button class="main-btn" onclick="toggleFS()">⛶ Fullscreen</button>
    <button class="main-btn" onclick="nextPage()">Next</button>
  </div>
</div>

<!-- PAGE 2 -->
<div class="page">
  <div class="card">
    <h2>Robot</h2>

    <label>Drive (single choice)</label>
    <div class="checkbox-inline">
      <label><input type="checkbox" class="drive" value="S">Swerve</label>
      <label><input type="checkbox" class="drive" value="T">Tank</label>
      <label><input type="checkbox" class="drive" value="M">Mecanum</label>
    </div>

    <label>Capacity</label>
    <input id="capacity" type="number" min="0">

    <label>Intake</label>
    <div class="checkbox-inline both-group">
      <label><input type="checkbox" class="intake" value="R">Roller</label>
      <label><input type="checkbox" class="intake" value="P">Pneumatic</label>
      <label><input type="checkbox" class="intake both" value="B">Both</label>
    </div>
  </div>

  <div class="nav-buttons">
    <button class="main-btn" onclick="prevPage()">Back</button>
    <button class="main-btn" onclick="nextPage()">Next</button>
  </div>
</div>

<!-- PAGE 3 -->
<div class="page">
  <div class="card">
    <h2>Auto</h2>

    <label>Preload</label>
    <input id="preload" type="number" min="0">

    <label>Source</label>
    <div class="checkbox-inline both-group">
      <label><input type="checkbox" class="asrc" value="O">Outpost</label>
      <label><input type="checkbox" class="asrc" value="D">Depot</label>
      <label><input type="checkbox" class="asrc both" value="B">Both</label>
    </div>
  </div>

  <div class="nav-buttons">
    <button class="main-btn" onclick="prevPage()">Back</button>
    <button class="main-btn" onclick="nextPage()">Next</button>
  </div>
</div>

<!-- PAGE 4 -->
<div class="page">
  <div class="card">
    <h2>Teleop</h2>

    <label>Climb Level</label>
    <div class="checkbox-inline">
      <label><input type="checkbox" class="cl" value="1">L1</label>
      <label><input type="checkbox" class="cl" value="2">L2</label>
      <label><input type="checkbox" class="cl" value="3">L3</label>
    </div>

    <label>Notes</label>
    <textarea id="notes"></textarea>
  </div>

  <div class="nav-buttons">
    <button class="main-btn" onclick="prevPage()">Back</button>
    <button class="main-btn" onclick="saveEntry()">Save & QR</button>
  </div>
</div>

<!-- PAGE 5 -->
<div class="page">
  <div class="card">
    <h2>QR Code</h2>
    <div id="qrcode"></div>
    <div id="savedEntries"></div>
  </div>

  <div class="nav-buttons">
    <button class="main-btn" onclick="resetAll()">Reset All</button>
  </div>
</div>

</div>

<script>
let page=0;
const pages=document.querySelectorAll(".page");
const show=i=>{pages.forEach(p=>p.classList.remove("active"));pages[i].classList.add("active");}
const nextPage=()=>show(++page);
const prevPage=()=>show(--page);
function toggleFS(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen();}

// Drive single-choice
document.querySelectorAll(".drive").forEach(c=>{
  c.addEventListener("change",()=>{
    if(c.checked) document.querySelectorAll(".drive").forEach(o=>o!==c&&(o.checked=false));
  });
});

// Both cancels others
document.querySelectorAll(".both-group").forEach(group=>{
  group.addEventListener("change",e=>{
    const both=group.querySelector(".both");
    const others=[...group.querySelectorAll("input:not(.both)")];
    if(e.target.classList.contains("both") && e.target.checked) others.forEach(o=>o.checked=false);
    if(!e.target.classList.contains("both") && e.target.checked) both&&(both.checked=false);
  });
});

// Capacity limits preload
const capacity=document.getElementById("capacity");
const preload=document.getElementById("preload");
capacity.addEventListener("input",()=>{
  preload.max=capacity.value||0;
  if(+preload.value>+preload.max) preload.value=preload.max;
});

// Profanity + racial slur filter
const badWords=["fuck","fucks","fucked","fucking","shit","shitty","asshole","bitch","cunt","dick","cock","slut","whore","porn","cum","jerk","idiot","moron","retard","wtf","stfu","gtfo","fck","fuk","sh1t","a$$","b1tch"];
const encodedSlurs=["bmlnZ2Vy","bmlnZ2E=","Y2hpbms=","c3BpYw==","a2lrZQ==","Z29vaw=="];
const racialSlurs=encodedSlurs.map(x=>atob(x));

function containsBadWords(text){
  return [...badWords,...racialSlurs].some(word=>{
    const pattern=new RegExp(`\\b${word.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}\\b`,"i");
    return pattern.test(text);
  });
}

// Save system with warnings
const saved=[];
function saveEntry(){
  const driveSelected=[...document.querySelectorAll(".drive:checked")];
  if(driveSelected.length===0){alert("Please select a drive."); return;}
  if(driveSelected.length>1){alert("Multiple drives selected! Only one allowed."); return;}

  document.querySelectorAll(".both-group").forEach(group=>{
    const both=group.querySelector(".both");
    const others=[...group.querySelectorAll("input:not(.both)")];
    if(both.checked && others.some(o=>o.checked)){
      alert("Cannot select 'Both' and other options in the same group."); return;
    }
  });

  if(+preload.value>+capacity.value){alert("Preload cannot exceed capacity."); return;}
  if(containsBadWords(scouter.value) || containsBadWords(notes.value)){alert("Please remove profanity or racial slurs."); return;}

  const d={
    scouter: scouter.value,
    team: team.value,
    robot:{drive:driveSelected.map(x=>x.value)},
    auto:{preload: preload.value},
    teleop:{notes: notes.value},
    ts:new Date().toLocaleString()
  };
  saved.push(d);
  document.getElementById("qrcode").innerHTML="";
  new QRCode(qrcode,{text:JSON.stringify(d),width:128,height:128});
  savedEntries.innerHTML+=`<div>Team ${d.team}</div>`;
  resetInputs();
  nextPage();
}

// Reset inputs
function resetInputs(){
  document.querySelectorAll("input,textarea").forEach(e=>{if(e.type==="checkbox") e.checked=false; else e.value="";});
  teamInfo.textContent="";
}

// Full reset
function resetAll(){
  resetInputs();
  saved.length=0;
  savedEntries.innerHTML="";
  qrcode.innerHTML="";
  page=0;show(0);
}

// 48 Teams
const teams={
6998:"Unipards – Tainan, Chinese Taipei",364:"Team Fusion – Gulfport, USA",456:"Siege Robotics – Vicksburg, USA",538:"Renaissance Robotics – Athens, USA",590:"Chahta Warriors – Choctaw, USA",
1421:"Team CHAOS – Picayune, USA",1912:"Team Combustion – Slidell, USA",1927:"Tempest – Biloxi, USA",2221:"FHS Robodawgs – Mandeville, USA",2556:"RadioActive Roaches – Niceville, USA",
2992:"S.S. Prometheus – Mandeville, USA",3039:"Wildcat Robotics – Destrehan, USA",3606:"BearMetal – Baton Rouge, USA",3616:"Team Phenomena – Lafayette, USA",3753:"BulahBots! – Baton Rouge, USA",
4087:"Voodoo Voltage – New Orleans, USA",4107:"Team Storm – Long Beach, USA",4336:"Ramageddon Robotics – Lafayette, USA",4400:"Cerbotics – Torreón, Mexico",5045:"SpartaBot – Memphis, USA",
5863:"Hypercubed – Brusly, USA",5971:"Raider Robotics – Metairie, USA",6184:"C4 – Tallahassee, USA",6489:"Bronco Bolts – Zachary, USA",6706:"Golem – Shenzhen, China",
7094:"Alpha Omega – Bay Saint Louis, USA",7474:"JXN UNITED – Ridgeland, USA",8044:"Denham Venom – Denham Springs, USA",8624:"Sasquatch Robotics – Andalusia, USA",8808:"SWLA Tech Pirates – Lake Charles, USA",
9153:"Bearcat Robotics – Ruston, USA",9309:"Metal Mages – New Orleans, USA",9405:"KNOS Robotics – New Orleans, USA",9503:"EF5 CHAOS – Laurel, USA",9717:"Poultronix – Forest, USA",
9734:"Jasper County Robotics – Bay Springs, USA",10101:"Critical Hit – Huntsville, USA",10217:"Catahoula Blue Dogs – Port Allen, USA",10309:"Jayhawks Robotics – Columbus, USA",10661:"Blue Phoenix – Shawnee, USA",
10929:"Tarpon Robotics – Cut Off, USA",10943:"WJH RoboStangs – Laurel, USA",10961:"Hyper Wave – Gulf Shores, USA",11107:"FARMBots – Farmerville, USA",11265:"Rockbotics – Bay Saint Louis, USA",
11287:"Canton Career Center – Canton, USA",11343:"JPS HS Robotics – Jackson, USA",11345:"Long Beach RoboBearcats – Long Beach, USA"
};

team.addEventListener("input",()=>teamInfo.textContent=teams[team.value]||"");
</script>

</body>
</html>
